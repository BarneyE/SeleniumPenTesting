package main.java;
import java.util.logging.*;
import java.net.URL;
import java.sql.Driver;
import java.util.*;

import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeDriverService;
import org.openqa.selenium.htmlunit.HtmlUnitDriver;
import org.openqa.selenium.support.pagefactory.ByChained;

import com.google.j2objc.annotations.ReflectionSupport.Level;

import org.apache.commons.logging.LogFactory;
import org.openqa.selenium.*;
import buildGUI.buildGUI;

public class scanForForms extends buildGUI{
	
	public static void main(String[] args) {

		System.setProperty("webdriver.chrome.driver", "C:\\Selenium Environment\\chromeDriverNew\\chromeDriver.exe");
		System.setProperty(ChromeDriverService.CHROME_DRIVER_SILENT_OUTPUT_PROPERTY,"true");
		//java.util.logging.Logger.getLogger("com.gargoylesoftware").setLevel(Level.OFF);
		LogFactory.getFactory().setAttribute("org.apache.commons.logging.Log", "org.apache.commons.logging.impl.NoOpLog");
		
		WebDriver driver = new HtmlUnitDriver();
		driver.get("http://localhost/dvwa/vulnerabilities/sqli/");

		List<WebElement> usernameForm = driver.findElements(By.name("username"));
		List<WebElement> passwordForm = driver.findElements(By.name("password"));
		List<WebElement> searchForm = driver.findElements(By.className("search"));
		 try {
		        Thread.sleep(10*100);
		    } catch (InterruptedException e) {
		        e.printStackTrace();
		    }
		System.out.println(".............Loading............");
		
		 try {
		        Thread.sleep(10*100);
		    } catch (InterruptedException e) {
		        e.printStackTrace();
		    }
		
		if(usernameForm.isEmpty()){
			System.out.println("No username form found ....");
		} 
		
		else if (passwordForm.isEmpty()) {
			System.out.println("No password form found .... ");
			 try {
			        Thread.sleep(10*100);
			    } catch (InterruptedException e) {
			        e.printStackTrace();
			    }
		} 
		else if (searchForm.isEmpty()) {
			System.out.println("No search form found");
			 try {
			        Thread.sleep(10*100);
			    } catch (InterruptedException e) {
			        e.printStackTrace();
			    }
		}
		for(int i =0; i < usernameForm.size(); i++){
		     System.out.println(usernameForm.get(i) + " Found on Page");
		     try {
		         Thread.sleep(10*100);
		     } catch (InterruptedException e) {
		         e.printStackTrace();
		     }
		  }
		for(int i =0; i < passwordForm.size(); i++){
		     System.out.println(passwordForm.get(i) + " Found on Page");
		     try {
		         Thread.sleep(10*100);
		     } catch (InterruptedException e) {
		         e.printStackTrace();
		     }
		  }
		for(int i =0; i < searchForm.size(); i++){
		     System.out.println(searchForm.get(i) + " Found on Page");
		     try {
		         Thread.sleep(10*100);
		     } catch (InterruptedException e) {
		         e.printStackTrace();
		     }
		  }
 		}
	}	

